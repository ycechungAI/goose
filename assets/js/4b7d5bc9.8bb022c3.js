"use strict";(self.webpackChunkgoose=self.webpackChunkgoose||[]).push([[2725],{30675:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>g,frontMatter:()=>a,metadata:()=>o,toc:()=>u});const o=JSON.parse('{"id":"guides/managing-tools/tool-router","title":"Tool Selection Strategy","description":"Configure smart tool selection to load only relevant tools, improving performance with multiple extensions","source":"@site/docs/guides/managing-tools/tool-router.md","sourceDirName":"guides/managing-tools","slug":"/guides/managing-tools/tool-router","permalink":"/goose/docs/guides/managing-tools/tool-router","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Tool Selection Strategy","sidebar_label":"Tool Selection Strategy","description":"Configure smart tool selection to load only relevant tools, improving performance with multiple extensions"},"sidebar":"tutorialSidebar","previous":{"title":"Adjust Tool Output","permalink":"/goose/docs/guides/managing-tools/adjust-tool-output"},"next":{"title":"Updating Goose","permalink":"/goose/docs/guides/updating-goose"}}');var r=n(74848),s=n(28453),l=n(65537),i=n(79329);const a={sidebar_position:3,title:"Tool Selection Strategy",sidebar_label:"Tool Selection Strategy",description:"Configure smart tool selection to load only relevant tools, improving performance with multiple extensions"},c=void 0,d={},u=[{value:"Tool Selection Strategies",id:"tool-selection-strategies",level:2},{value:"Default Strategy",id:"default-strategy",level:3},{value:"Vector Strategy",id:"vector-strategy",level:3},{value:"LLM-based Strategy",id:"llm-based-strategy",level:3},{value:"Configuration",id:"configuration",level:2}];function h(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.admonition,{title:"Preview Feature",type:"info",children:(0,r.jsx)(t.p,{children:"The Tool Selection Strategy is currently in preview. The Vector selection strategy is currently limited to Claude models served on Databricks."})}),"\n",(0,r.jsxs)(t.p,{children:["When you enable an ",(0,r.jsx)(t.a,{href:"/docs/getting-started/using-extensions",children:"extension"}),", you gain access to all of its tools. For example, the Google Drive extension provides tools for reading documents, updating permissions, managing comments, and more. By default, Goose loads all tools into context when interacting with the LLM."]}),"\n",(0,r.jsx)(t.p,{children:"Enabling multiple extensions gives you access to a wider range of tools, but loading a lot of tools into context can be inefficient and confusing for the LLM. It's like having every tool in your workshop spread out on your bench when you only need one or two."}),"\n",(0,r.jsx)(t.p,{children:"Choosing an intelligent tool selection strategy helps avoid this problem. Instead of loading all tools for every interaction, it loads only the tools needed for your current task. Both vector and LLM-based strategies ensure that only the functionality you need is loaded into context, so you can keep more of your favorite extensions enabled. These strategies provide:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Reduced token consumption"}),"\n",(0,r.jsx)(t.li,{children:"Improved LLM performance"}),"\n",(0,r.jsx)(t.li,{children:"Better context management"}),"\n",(0,r.jsx)(t.li,{children:"More accurate and efficient tool selection"}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"tool-selection-strategies",children:"Tool Selection Strategies"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Strategy"}),(0,r.jsx)(t.th,{children:"Speed"}),(0,r.jsx)(t.th,{children:"Best For"}),(0,r.jsx)(t.th,{children:"Example Query"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"Default"})}),(0,r.jsx)(t.td,{children:"Fastest"}),(0,r.jsx)(t.td,{children:"Few extensions, simple setups"}),(0,r.jsx)(t.td,{children:"Any query (loads all tools)"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"Vector"})}),(0,r.jsx)(t.td,{children:"Fast"}),(0,r.jsx)(t.td,{children:"Keyword-based matching"}),(0,r.jsx)(t.td,{children:'"read pdf file"'})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"LLM-based"})}),(0,r.jsx)(t.td,{children:"Slower"}),(0,r.jsx)(t.td,{children:"Complex, ambiguous queries"}),(0,r.jsx)(t.td,{children:'"analyze document contents"'})]})]})]}),"\n",(0,r.jsx)(t.h3,{id:"default-strategy",children:"Default Strategy"}),"\n",(0,r.jsx)(t.p,{children:"The default strategy loads all tools from enabled extensions into context, which works well if you only have a few extensions enabled. When you have more than a few extensions enabled, you should use the vector or LLM-based strategy for intelligent tool selection."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Best for:"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Simple setups with few extensions"}),"\n",(0,r.jsx)(t.li,{children:"When you want all tools available at all times"}),"\n",(0,r.jsx)(t.li,{children:"Maximum tool availability without selection logic"}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"vector-strategy",children:"Vector Strategy"}),"\n",(0,r.jsx)(t.p,{children:"The vector strategy uses mathematical similarity between embeddings to find relevant tools, providing efficient matching based on vector similarity between your query and available tools."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Best for:"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Situations where fast response times are critical"}),"\n",(0,r.jsx)(t.li,{children:"Queries with keywords that match tool names or descriptions"}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Example:"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:'Prompt: "read pdf file"'}),"\n",(0,r.jsx)(t.li,{children:"Result: Quickly matches with PDF-related tools based on keyword similarity"}),"\n"]}),"\n",(0,r.jsx)(t.admonition,{title:"Embedding Model",type:"info",children:(0,r.jsxs)(t.p,{children:["The default embedding model is ",(0,r.jsx)(t.code,{children:"text-embedding-3-small"}),". You can change it using ",(0,r.jsx)(t.a,{href:"/docs/guides/environment-variables#tool-selection-strategy",children:"environment variables"}),"."]})}),"\n",(0,r.jsx)(t.h3,{id:"llm-based-strategy",children:"LLM-based Strategy"}),"\n",(0,r.jsx)(t.p,{children:"The LLM-based strategy leverages natural language understanding to analyze tools and queries semantically, making selections based on the full meaning of your request."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Best for:"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Complex or ambiguous queries that require understanding context"}),"\n",(0,r.jsx)(t.li,{children:"Cases where exact keyword matches might miss relevant tools"}),"\n",(0,r.jsx)(t.li,{children:"Situations where nuanced tool selection is important"}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Example:"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:'Prompt: "help me analyze the contents of my document"'}),"\n",(0,r.jsx)(t.li,{children:"Result: Understands context and might suggest both PDF readers and content analysis tools"}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsxs)(l.A,{groupId:"interface",children:[(0,r.jsx)(i.A,{value:"ui",label:"Goose Desktop",default:!0,children:(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsx)(t.li,{children:"Click the gear icon \u2699\ufe0f on the top toolbar"}),"\n",(0,r.jsxs)(t.li,{children:["Click ",(0,r.jsx)(t.code,{children:"Advanced settings"})]}),"\n",(0,r.jsxs)(t.li,{children:["Under ",(0,r.jsx)(t.code,{children:"Tool Selection Strategy"}),", select your preferred strategy:","\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.code,{children:"Default"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.code,{children:"Vector"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.code,{children:"LLM-based"})}),"\n"]}),"\n"]}),"\n"]})}),(0,r.jsxs)(i.A,{value:"cli",label:"Goose CLI",children:[(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["Run the ",(0,r.jsx)(t.code,{children:"configuration"})," command:"]}),"\n"]}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-sh",children:"goose configure\n"})}),(0,r.jsxs)(t.ol,{start:"2",children:["\n",(0,r.jsxs)(t.li,{children:["Select ",(0,r.jsx)(t.code,{children:"Goose Settings"}),":"]}),"\n"]}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-sh",children:"\u250c   goose-configure\n\u2502\n\u25c6  What would you like to configure?\n\u2502  \u25cb Configure Providers\n\u2502  \u25cb Add Extension\n\u2502  \u25cb Toggle Extensions\n\u2502  \u25cb Remove Extension\n// highlight-start\n\u2502  \u25cf Goose Settings (Set the Goose Mode, Tool Output, Tool Permissions, Experiment, Goose recipe github repo and more)\n// highlight-end\n\u2514 \n"})}),(0,r.jsxs)(t.ol,{start:"3",children:["\n",(0,r.jsxs)(t.li,{children:["Select ",(0,r.jsx)(t.code,{children:"Router Tool Selection Strategy"}),":"]}),"\n"]}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-sh",children:"\u250c   goose-configure\n\u2502\n\u25c7  What would you like to configure?\n\u2502  Goose Settings\n\u2502\n\u25c6  What setting would you like to configure?\n\u2502  \u25cb Goose Mode \n// highlight-start\n\u2502  \u25cf Router Tool Selection Strategy (Configure the strategy for selecting tools to use)\n// highlight-end\n\u2502  \u25cb Tool Permission \n\u2502  \u25cb Tool Output \n\u2502  \u25cb Toggle Experiment \n\u2502  \u25cb Goose recipe github repo \n\u2514 \n"})}),(0,r.jsxs)(t.ol,{start:"4",children:["\n",(0,r.jsx)(t.li,{children:"Select your preferred strategy:"}),"\n"]}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-sh",children:"\u250c   goose-configure \n\u2502\n\u25c7  What would you like to configure?\n\u2502  Goose Settings \n\u2502\n\u25c7  What setting would you like to configure?\n\u2502  Router Tool Selection Strategy \n\u2502\n// highlight-start\n\u25c6  Which router strategy would you like to use?\n\u2502  \u25cf Vector Strategy (Use vector-based similarity to select tools)\n\u2502  \u25cb Default Strategy \n// highlight-end\n\u2514  \n"})}),(0,r.jsx)(t.admonition,{type:"info",children:(0,r.jsx)(t.p,{children:"Currently, the LLM-based strategy can't be configured using the CLI."})}),(0,r.jsxs)(t.p,{children:["This example output shows the ",(0,r.jsx)(t.code,{children:"Vector Strategy"})," was selected:"]}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"\u250c   goose-configure\n\u2502\n\u25c7  What would you like to configure?\n\u2502  Goose Settings\n\u2502\n\u25c7  What setting would you like to configure?\n\u2502  Router Tool Selection Strategy\n\u2502\n\u25c7  Which router strategy would you like to use?\n\u2502  Vector Strategy\n\u2502\n\u2514  Set to Vector Strategy - using vector-based similarity for tool selection\n"})}),(0,r.jsx)(t.p,{children:"Goose CLI display a message indicating when the vector or LLM-based strategy is currently being used."})]})]})]})}function g(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},79329:(e,t,n)=>{n.d(t,{A:()=>l});n(96540);var o=n(34164);const r={tabItem:"tabItem_Ymn6"};var s=n(74848);function l(e){let{children:t,hidden:n,className:l}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,o.A)(r.tabItem,l),hidden:n,children:t})}},65537:(e,t,n)=>{n.d(t,{A:()=>w});var o=n(96540),r=n(34164),s=n(65627),l=n(56347),i=n(50372),a=n(30604),c=n(11861),d=n(78749);function u(e){return o.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,o.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:t,children:n}=e;return(0,o.useMemo)((()=>{const e=t??function(e){return u(e).map((e=>{let{props:{value:t,label:n,attributes:o,default:r}}=e;return{value:t,label:n,attributes:o,default:r}}))}(n);return function(e){const t=(0,c.XI)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function g(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function x(e){let{queryString:t=!1,groupId:n}=e;const r=(0,l.W6)(),s=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,a.aZ)(s),(0,o.useCallback)((e=>{if(!s)return;const t=new URLSearchParams(r.location.search);t.set(s,e),r.replace({...r.location,search:t.toString()})}),[s,r])]}function m(e){const{defaultValue:t,queryString:n=!1,groupId:r}=e,s=h(e),[l,a]=(0,o.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!g({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const o=n.find((e=>e.default))??n[0];if(!o)throw new Error("Unexpected error: 0 tabValues");return o.value}({defaultValue:t,tabValues:s}))),[c,u]=x({queryString:n,groupId:r}),[m,p]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[r,s]=(0,d.Dv)(n);return[r,(0,o.useCallback)((e=>{n&&s.set(e)}),[n,s])]}({groupId:r}),f=(()=>{const e=c??m;return g({value:e,tabValues:s})?e:null})();(0,i.A)((()=>{f&&a(f)}),[f]);return{selectedValue:l,selectValue:(0,o.useCallback)((e=>{if(!g({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);a(e),u(e),p(e)}),[u,p,s]),tabValues:s}}var p=n(9136);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var y=n(74848);function j(e){let{className:t,block:n,selectedValue:o,selectValue:l,tabValues:i}=e;const a=[],{blockElementScrollPositionUntilNextRender:c}=(0,s.a_)(),d=e=>{const t=e.currentTarget,n=a.indexOf(t),r=i[n].value;r!==o&&(c(t),l(r))},u=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const n=a.indexOf(e.currentTarget)+1;t=a[n]??a[0];break}case"ArrowLeft":{const n=a.indexOf(e.currentTarget)-1;t=a[n]??a[a.length-1];break}}t?.focus()};return(0,y.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":n},t),children:i.map((e=>{let{value:t,label:n,attributes:s}=e;return(0,y.jsx)("li",{role:"tab",tabIndex:o===t?0:-1,"aria-selected":o===t,ref:e=>{a.push(e)},onKeyDown:u,onClick:d,...s,className:(0,r.A)("tabs__item",f.tabItem,s?.className,{"tabs__item--active":o===t}),children:n??t},t)}))})}function b(e){let{lazy:t,children:n,selectedValue:s}=e;const l=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=l.find((e=>e.props.value===s));return e?(0,o.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,y.jsx)("div",{className:"margin-top--md",children:l.map(((e,t)=>(0,o.cloneElement)(e,{key:t,hidden:e.props.value!==s})))})}function v(e){const t=m(e);return(0,y.jsxs)("div",{className:(0,r.A)("tabs-container",f.tabList),children:[(0,y.jsx)(j,{...t,...e}),(0,y.jsx)(b,{...t,...e})]})}function w(e){const t=(0,p.A)();return(0,y.jsx)(v,{...e,children:u(e.children)},String(t))}},28453:(e,t,n)=>{n.d(t,{R:()=>l,x:()=>i});var o=n(96540);const r={},s=o.createContext(r);function l(e){const t=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),o.createElement(s.Provider,{value:t},e.children)}}}]);