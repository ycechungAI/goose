"use strict";(self.webpackChunkgoose=self.webpackChunkgoose||[]).push([[6072],{93821:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"guides/cli-providers","title":"CLI Providers","description":"Use Claude Code or Gemini CLI subscriptions in Goose","source":"@site/docs/guides/cli-providers.md","sourceDirName":"guides","slug":"/guides/cli-providers","permalink":"/goose/docs/guides/cli-providers","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8,"title":"CLI Providers","sidebar_label":"CLI Providers","description":"Use Claude Code or Gemini CLI subscriptions in Goose"},"sidebar":"tutorialSidebar","previous":{"title":"CLI Commands","permalink":"/goose/docs/guides/goose-cli-commands"},"next":{"title":"LLM Rate Limits","permalink":"/goose/docs/guides/handling-llm-rate-limits-with-goose"}}');var o=i(74848),r=i(28453);const l={sidebar_position:8,title:"CLI Providers",sidebar_label:"CLI Providers",description:"Use Claude Code or Gemini CLI subscriptions in Goose"},t="CLI Providers",d={},a=[{value:"Why Use CLI Providers?",id:"why-use-cli-providers",level:2},{value:"Benefits",id:"benefits",level:3},{value:"Session Management",id:"session-management",level:4},{value:"Workflow Integration",id:"workflow-integration",level:4},{value:"Interface Consistency",id:"interface-consistency",level:4},{value:"Available CLI Providers",id:"available-cli-providers",level:2},{value:"Claude Code",id:"claude-code",level:3},{value:"Gemini CLI",id:"gemini-cli",level:3},{value:"Setup Instructions",id:"setup-instructions",level:2},{value:"Claude Code",id:"claude-code-1",level:3},{value:"Gemini CLI",id:"gemini-cli-1",level:3},{value:"Usage Examples",id:"usage-examples",level:2},{value:"Basic Usage",id:"basic-usage",level:3},{value:"Combining with Other Models",id:"combining-with-other-models",level:3},{value:"Configuration Options",id:"configuration-options",level:2},{value:"Claude Code Configuration",id:"claude-code-configuration",level:3},{value:"Gemini CLI Configuration",id:"gemini-cli-configuration",level:3},{value:"How It Works",id:"how-it-works",level:2},{value:"System Prompt Filtering",id:"system-prompt-filtering",level:3},{value:"Message Translation",id:"message-translation",level:3},{value:"Response Processing",id:"response-processing",level:3},{value:"Error Handling",id:"error-handling",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"cli-providers",children:"CLI Providers"})}),"\n",(0,o.jsx)(n.p,{children:"Goose supports pass-through providers that integrate with existing CLI tools from Anthropic and Google. These providers allow you to use your existing Claude Code and Google Gemini CLI subscriptions through Goose's interface, adding session management, persistence, and workflow integration capabilities to these tools."}),"\n",(0,o.jsx)(n.h2,{id:"why-use-cli-providers",children:"Why Use CLI Providers?"}),"\n",(0,o.jsx)(n.p,{children:"CLI providers are useful if you:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"already have a Claude Code or Google Gemini CLI subscription and want to use it through Goose instead of paying per token"}),"\n",(0,o.jsx)(n.li,{children:"need session persistence to save, resume, and export conversation history"}),"\n",(0,o.jsx)(n.li,{children:"want to use Goose recipes and scheduled tasks to create repeatable workflows"}),"\n",(0,o.jsx)(n.li,{children:"prefer unified commands across different AI providers"}),"\n",(0,o.jsxs)(n.li,{children:["want to ",(0,o.jsx)(n.a,{href:"#combining-with-other-models",children:"use multiple models together"})," in your tasks"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"benefits",children:"Benefits"}),"\n",(0,o.jsx)(n.h4,{id:"session-management",children:"Session Management"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Persistent conversations"}),": Save and resume sessions across restarts"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Export capabilities"}),": Export conversation history and artifacts"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Session organization"}),": Manage multiple conversation threads"]}),"\n"]}),"\n",(0,o.jsx)(n.h4,{id:"workflow-integration",children:"Workflow Integration"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Recipe compatibility"}),": Use CLI providers in automated Goose recipes"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Scheduling support"}),": Include in scheduled tasks and workflows"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Hybrid configurations"}),": Combine with LLM providers using lead/worker patterns"]}),"\n"]}),"\n",(0,o.jsx)(n.h4,{id:"interface-consistency",children:"Interface Consistency"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Unified commands"}),": Use the same ",(0,o.jsx)(n.code,{children:"goose session"})," interface across all providers"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Consistent configuration"}),": Manage all providers through Goose's configuration system"]}),"\n"]}),"\n",(0,o.jsx)(n.admonition,{title:"Extensions",type:"warning",children:(0,o.jsxs)(n.p,{children:["CLI providers do ",(0,o.jsx)(n.strong,{children:"not"})," give you access to Goose's extension ecosystem (MCP servers, third-party integrations, etc.). They use their own built-in tools to prevent conflicts. If you need Goose's extensions, use standard ",(0,o.jsx)(n.a,{href:"/docs/getting-started/providers#available-providers",children:"API providers"})," instead."]})}),"\n",(0,o.jsx)(n.h2,{id:"available-cli-providers",children:"Available CLI Providers"}),"\n",(0,o.jsx)(n.h3,{id:"claude-code",children:"Claude Code"}),"\n",(0,o.jsxs)(n.p,{children:["The Claude Code provider integrates with Anthropic's ",(0,o.jsx)(n.a,{href:"https://claude.ai/cli",children:"Claude CLI tool"}),", allowing you to use Claude models through your existing Claude Code subscription."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Features:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Uses Claude's latest models"}),"\n",(0,o.jsx)(n.li,{children:"200,000 token context limit"}),"\n",(0,o.jsx)(n.li,{children:"Automatic filtering of Goose extensions from system prompts (since Claude Code has its own tool ecosystem)"}),"\n",(0,o.jsx)(n.li,{children:"JSON output parsing for structured responses"}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Requirements:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Claude CLI tool installed and configured"}),"\n",(0,o.jsx)(n.li,{children:"Active Claude Code subscription"}),"\n",(0,o.jsx)(n.li,{children:"CLI tool authenticated with your Anthropic account"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"gemini-cli",children:"Gemini CLI"}),"\n",(0,o.jsxs)(n.p,{children:["The Gemini CLI provider integrates with Google's ",(0,o.jsx)(n.a,{href:"https://ai.google.dev/gemini-api/docs",children:"Gemini CLI tool"}),", providing access to Gemini models through your Google AI subscription."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Features:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"1,000,000 token context limit"}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Requirements:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Gemini CLI tool installed and configured"}),"\n",(0,o.jsx)(n.li,{children:"CLI tool authenticated with your Google account"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"setup-instructions",children:"Setup Instructions"}),"\n",(0,o.jsx)(n.h3,{id:"claude-code-1",children:"Claude Code"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Install Claude CLI Tool"})}),"\n",(0,o.jsxs)(n.p,{children:["Follow the ",(0,o.jsx)(n.a,{href:"https://docs.anthropic.com/en/docs/claude-code/overview",children:"installation instructions for Claude Code"})," to install and configure the Claude CLI tool."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Authenticate with Claude"})}),"\n",(0,o.jsx)(n.p,{children:"Ensure your Claude CLI is authenticated and working"}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Configure Goose"})}),"\n",(0,o.jsx)(n.p,{children:"Set the provider environment variable:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"export GOOSE_PROVIDER=claude-code\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Or configure through the Goose CLI using ",(0,o.jsx)(n.code,{children:"goose configure"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"\u250c   goose-configure \n\u2502\n\u25c7  What would you like to configure?\n\u2502  Configure Providers \n\u2502\n\u25c7  Which model provider should we use?\n\u2502  Claude Code \n\u2502\n\u25c7  Model fetch complete\n\u2502\n\u25c7  Enter a model from that provider:\n\u2502  default\n"})}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"gemini-cli-1",children:"Gemini CLI"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Install Gemini CLI Tool"})}),"\n",(0,o.jsxs)(n.p,{children:["Follow the ",(0,o.jsx)(n.a,{href:"https://blog.google/technology/developers/introducing-gemini-cli-open-source-ai-agent/",children:"installation instructions for Gemini CLI"})," to install and configure the Gemini CLI tool."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Authenticate with Google"})}),"\n",(0,o.jsx)(n.p,{children:"Ensure your Gemini CLI is authenticated and working."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Configure Goose"})}),"\n",(0,o.jsx)(n.p,{children:"Set the provider environment variable:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"export GOOSE_PROVIDER=gemini-cli\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Or configure through the Goose CLI using ",(0,o.jsx)(n.code,{children:"goose configure"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"\u250c   goose-configure \n\u2502\n\u25c7  What would you like to configure?\n\u2502  Configure Providers \n\u2502\n\u25c7  Which model provider should we use?\n\u2502  Gemini CLI \n\u2502\n\u25c7  Model fetch complete\n\u2502\n\u25c7  Enter a model from that provider:\n\u2502  default\n"})}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"usage-examples",children:"Usage Examples"}),"\n",(0,o.jsx)(n.h3,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,o.jsx)(n.p,{children:"Once configured, you can start a Goose session using these providers just like any others:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"goose session\n"})}),"\n",(0,o.jsx)(n.h3,{id:"combining-with-other-models",children:"Combining with Other Models"}),"\n",(0,o.jsxs)(n.p,{children:["CLI providers work well in combination with other models using Goose's ",(0,o.jsx)(n.a,{href:"/docs/tutorials/lead-worker",children:"lead/worker pattern"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Use Claude Code as lead model, GPT-4o as worker\nexport GOOSE_LEAD_PROVIDER=claude-code\nexport GOOSE_PROVIDER=openai\nexport GOOSE_MODEL=gpt-4o\nexport GOOSE_LEAD_MODEL=default\n\ngoose session\n"})}),"\n",(0,o.jsx)(n.h2,{id:"configuration-options",children:"Configuration Options"}),"\n",(0,o.jsx)(n.h3,{id:"claude-code-configuration",children:"Claude Code Configuration"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Environment Variable"}),(0,o.jsx)(n.th,{children:"Description"}),(0,o.jsx)(n.th,{children:"Default"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"GOOSE_PROVIDER"})}),(0,o.jsxs)(n.td,{children:["Set to ",(0,o.jsx)(n.code,{children:"claude-code"})," to use this provider"]}),(0,o.jsx)(n.td,{children:"None"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"CLAUDE_CODE_COMMAND"})}),(0,o.jsx)(n.td,{children:"Path to the Claude CLI command"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"claude"})})]})]})]}),"\n",(0,o.jsx)(n.h3,{id:"gemini-cli-configuration",children:"Gemini CLI Configuration"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Environment Variable"}),(0,o.jsx)(n.th,{children:"Description"}),(0,o.jsx)(n.th,{children:"Default"})]})}),(0,o.jsx)(n.tbody,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"GOOSE_PROVIDER"})}),(0,o.jsxs)(n.td,{children:["Set to ",(0,o.jsx)(n.code,{children:"gemini-cli"})," to use this provider"]}),(0,o.jsx)(n.td,{children:"None"})]})})]}),"\n",(0,o.jsx)(n.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,o.jsx)(n.h3,{id:"system-prompt-filtering",children:"System Prompt Filtering"}),"\n",(0,o.jsx)(n.p,{children:"Both CLI providers automatically filter out Goose's extension information from system prompts since these CLI tools have their own tool ecosystems. This prevents conflicts and ensures clean interaction with the underlying CLI tools."}),"\n",(0,o.jsx)(n.h3,{id:"message-translation",children:"Message Translation"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Claude Code"}),": Converts Goose messages to Claude's JSON message format, handling tool calls and responses appropriately"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Gemini CLI"}),": Converts messages to simple text prompts with role prefixes (Human:/Assistant:)"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"response-processing",children:"Response Processing"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Claude Code"}),": Parses JSON responses to extract text content and usage information"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Gemini CLI"}),": Processes plain text responses from the CLI tool"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,o.jsx)(n.p,{children:"CLI providers depend on external tools, so ensure:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"CLI tools are properly installed and in your PATH"}),"\n",(0,o.jsx)(n.li,{children:"Authentication is maintained and valid"}),"\n",(0,o.jsx)(n.li,{children:"Subscription limits are not exceeded"}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.p,{children:"CLI providers offer a way to use existing AI tool subscriptions through Goose's interface, adding session management and workflow integration capabilities. They're particularly valuable for users with existing CLI subscriptions who want unified session management and recipe integration."})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>t});var s=i(96540);const o={},r=s.createContext(o);function l(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);